jdk:
  - openjdk11  # Ensure JitPack uses Java 11

install:
  - echo "Setting up Node.js..."
  - curl -fsSL https://deb.nodesource.com/setup_16.x | bash -  # Install Node.js 16 (compatible with JitPack)
  - apt-get install -y nodejs
  - node -v  # Verify Node.js installation
  - npm -v   # Verify npm installation
  - npm install -g yarn  # Ensure Yarn is installed

before_script:
  - echo "Pre-build setup completed."

build:
  - ./gradlew clean assemble publishToMavenLocal -x test -x lint  # Skip unnecessary tasks

cache:
  - $HOME/.gradle/caches
  - $HOME/.gradle/wrapper
  - $HOME/.npm
  - $HOME/.yarn-cache

